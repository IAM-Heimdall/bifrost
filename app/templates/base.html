<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }} - AIF PoC</title>
    <link rel="stylesheet" href="{{ url_for('static', path='/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Top Navigation Bar -->
    <div class="top-nav">
        <div class="logo">
            <img src="{{ url_for('static', path='/assets/logo.png') }}" alt="AIF Logo">
            <span>IAM Heimdall</span>
        </div>
        
        <div class="user-menu">
            <div class="user-avatar">
                <span>AD</span>
                <div class="user-dropdown">
                    <span>Admin User</span>
                    <ul>
                        <li><a href="#settings">Settings</a></li>
                        <li><a href="#logout">Logout</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Layout Container -->
    <div class="layout">
        <!-- Sidebar -->
        <div class="sidebar">
            <nav>
                <section>
                    <h3>Core Functions</h3>
                    <ul>
                        <li>
                            <a href="{{ url_for('ui_dashboard') }}" class="nav-item {% if request.url.path == '/ui/' %}active{% endif %}">
                                <svg class="nav-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="3" width="7" height="7"></rect>
                                    <rect x="14" y="3" width="7" height="7"></rect>
                                    <rect x="14" y="14" width="7" height="7"></rect>
                                    <rect x="3" y="14" width="7" height="7"></rect>
                                </svg>
                                Dashboard
                            </a>
                        </li>
                        <li>
                            <a href="{{ url_for('issue_token_form_get') }}" class="nav-item {% if 'issue-token' in request.url.path %}active{% endif %}">
                                <svg class="nav-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <polyline points="12,6 12,12 16,14"></polyline>
                                </svg>
                                Issue Token
                            </a>
                        </li>
                        <li>
                            <a href="{{ url_for('revoke_token_form_get') }}" class="nav-item {% if 'revoke-token' in request.url.path %}active{% endif %}">
                                <svg class="nav-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polygon points="11 2 13 2 13 22 11 22"></polygon>
                                    <path d="m7 7 5-5 5 5"></path>
                                    <path d="m7 17 5 5 5-5"></path>
                                </svg>
                                Revoke Token
                            </a>
                        </li>
                    </ul>
                </section>
                
                <section class="separator">
                    <h3>Coming Soon</h3>
                    <ul>
                        <li>
                            <a href="{{ url_for('register_agent_builder_form_get') }}" class="nav-item disabled">
                                <svg class="nav-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                    <circle cx="12" cy="7" r="4"></circle>
                                </svg>
                                Agent Builder
                            </a>
                        </li>
                        <li>
                            <a href="{{ url_for('register_service_provider_form_get') }}" class="nav-item disabled">
                                <svg class="nav-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 22s8-4 8-10V6l-8-3-8 3v6c0 6 8 10 8 10z"></path>
                                </svg>
                                Service Provider
                            </a>
                        </li>
                    </ul>
                </section>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            {% if message %}
                <div class="alert alert-{{ message_type or 'info' }}">
                    <svg class="alert-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        {% if message_type == 'success' %}
                            <polyline points="20,6 9,17 4,12"></polyline>
                        {% elif message_type == 'error' %}
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="15" y1="9" x2="9" y2="15"></line>
                            <line x1="9" y1="9" x2="15" y2="15"></line>
                        {% else %}
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="12" y1="8" x2="12" y2="12"></line>
                            <line x1="12" y1="16" x2="12.01" y2="16"></line>
                        {% endif %}
                    </svg>
                    {{ message }}
                </div>
            {% endif %}
            
            <div class="content-header">
                <h1>{{ title }}</h1>
            </div>
            
            <div class="content-body">
                {% block content %}{% endblock %}
            </div>
        </div>
    </div>

    <script>
        // Simple toggle for user dropdown
        document.addEventListener('DOMContentLoaded', function() {
            const userAvatar = document.querySelector('.user-avatar');
            const userDropdown = document.querySelector('.user-dropdown');
            
            if (userAvatar && userDropdown) {
                userAvatar.addEventListener('click', function(e) {
                    e.stopPropagation();
                    userDropdown.style.display = userDropdown.style.display === 'block' ? 'none' : 'block';
                });
                
                document.addEventListener('click', function() {
                    userDropdown.style.display = 'none';
                });
            }
        });
    </script>
</body>
</html>